{% comment %} اسلایدر بالای سایت با تنظیمات خودکار از ادمین {% endcomment %}
{% if top_slider and top_slider.is_enabled and top_slides %}
<div
  id="topCarousel"
  class="carousel slide"
  {% if top_slider.autoplay %}data-bs-ride="carousel"{% else %}data-bs-ride="false"{% endif %}
  data-bs-interval="{{ top_slider.autoplay_interval_ms }}"
  data-bs-pause="{% if top_slider.pause_on_hover %}hover{% else %}false{% endif %}"
  data-bs-wrap="{% if top_slider.wrap %}true{% else %}false{% endif %}"
>
  {% if top_slider.show_indicators %}
  <div class="carousel-indicators">
    {% for s in top_slides %}
      <button type="button" data-bs-target="#topCarousel" data-bs-slide-to="{{ forloop.counter0 }}" {% if forloop.first %}class="active" aria-current="true"{% endif %} aria-label="Slide {{ forloop.counter }}"></button>
    {% endfor %}
  </div>
  {% endif %}

  <div class="carousel-inner">
    {% for s in top_slides %}
    <div class="carousel-item {% if forloop.first %}active{% endif %}">
      <div class="position-relative" style="height: 420px;">
        <img src="{{ s.image.url }}" class="d-block w-100 h-100" alt="{{ s.title|default:'slide' }}" style="object-fit: cover;">
        <div class="position-absolute top-0 start-0 w-100 h-100" style="background: linear-gradient(0deg, rgba(0,0,0,0.45), rgba(0,0,0,0.15));"></div>
        {% if s.title or s.subtitle or s.button_label %}
        <div class="carousel-caption d-none d-md-block text-start">
          {% if s.title %}<h5 class="fw-bold">{{ s.title }}</h5>{% endif %}
          {% if s.subtitle %}<p class="mb-2">{{ s.subtitle }}</p>{% endif %}
          {% if s.button_label and s.button_url %}
            <a href="{{ s.button_url }}" class="btn btn-primary btn-sm">{{ s.button_label }}</a>
          {% endif %}
        </div>
        {% endif %}
      </div>
    </div>
    {% endfor %}
  </div>

  {% if top_slider.show_controls %}
  <button class="carousel-control-prev" type="button" data-bs-target="#topCarousel" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">قبلی</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#topCarousel" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">بعدی</span>
  </button>
  {% endif %}
</div>
{% endif %}
